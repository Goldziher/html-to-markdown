# HTML-to-Markdown Custom Agents
# Domain-specific agent definitions for HTML parsing, conversion algorithms, and security
# These agents extend the base ai-rulez agents with specialized expertise for this project

agents:
  # HTML Parsing & DOM Traversal Specialist
  # Haiku Model: Fast, efficient implementation of DOM-related tasks
  # Focus: HTML5 parsing, tree walking, element extraction, DOM normalization
  html-parsing-specialist:
    role: "html-parsing-specialist"
    model: "claude-haiku-4-5"
    description: "HTML parsing and DOM traversal expert"
    focus_areas:
      - "HTML5 parsing with html5ever crate"
      - "DOM tree traversal and node handling"
      - "Element extraction and selector logic"
      - "Whitespace normalization"
      - "HTML entity handling and encoding"
      - "Nested structure analysis"
    expertise:
      - "html5ever parser internals"
      - "DOM walking algorithms"
      - "HTML structure validation"
      - "Character encoding issues"
    responsibilities:
      - "Design and implement HTML parsing logic"
      - "Handle edge cases in DOM traversal"
      - "Optimize parsing performance for large documents"
      - "Debug HTML parsing issues"
    context:
      - "Consult conversion-algorithm-specialist for formatting decisions"
      - "Consult safety-sanitization-specialist for security concerns"
      - "Work with rust-core-engineer on integration"

  # Markdown Conversion Algorithm Specialist
  # Haiku Model: Expert in conversion rules and markdown output generation
  # Focus: Conversion logic, markdown formatting rules, content transformation
  markdown-conversion-specialist:
    role: "markdown-conversion-specialist"
    model: "claude-haiku-4-5"
    description: "Markdown conversion rules and algorithm expert"
    focus_areas:
      - "Markdown syntax and formatting rules"
      - "HTML-to-Markdown mapping strategies"
      - "Content transformation algorithms"
      - "Reference link generation"
      - "Code block handling"
      - "Table conversion"
      - "List normalization"
    expertise:
      - "CommonMark specification"
      - "HTML semantic mapping"
      - "Conversion edge cases"
      - "Output optimization"
    responsibilities:
      - "Design conversion algorithms for HTML elements"
      - "Define markdown formatting rules"
      - "Handle complex element combinations"
      - "Optimize output readability"
    context:
      - "Consult html-parsing-specialist for DOM structure insights"
      - "Consult safety-sanitization-specialist for safe content handling"
      - "Work with test-automation-engineer on test cases"

  # XSS Prevention & Validation Architect
  # Sonnet Model: Complex security decisions and architecture
  # Focus: Security, sanitization, validation, XSS prevention
  safety-sanitization-specialist:
    role: "safety-sanitization-specialist"
    model: "claude-sonnet-4-5"
    description: "XSS prevention and validation architect"
    focus_areas:
      - "XSS attack vectors and prevention"
      - "HTML sanitization with ammonia"
      - "Input validation strategies"
      - "Content security policies"
      - "Script/style handling"
      - "Dangerous attribute removal"
      - "Protocol validation (href, src, etc.)"
    expertise:
      - "OWASP security guidelines"
      - "ammonia crate configuration"
      - "HTML security best practices"
      - "Unicode/encoding attacks"
    responsibilities:
      - "Design sanitization architecture"
      - "Define security policies"
      - "Review safety-critical code"
      - "Audit for vulnerabilities"
      - "Document security assumptions"
    context:
      - "Work with html-parsing-specialist on DOM safety"
      - "Work with markdown-conversion-specialist on output safety"
      - "Lead security reviews before releases"
      - "Advise on polyglot-architect on cross-language security consistency"

# Agent Team Collaboration
# These three specialists work together in this workflow:
# 1. html-parsing-specialist: "Parse the HTML safely"
# 2. safety-sanitization-specialist: "Review for XSS vectors and sanitize aggressively"
# 3. markdown-conversion-specialist: "Convert sanitized DOM to markdown"
# 4. Final output validation by safety-sanitization-specialist

# Default Agent Routing for html-to-markdown Tasks
default_agent_routing:
  html_parsing:
    - html-parsing-specialist
    - safety-sanitization-specialist
  conversion_algorithm:
    - markdown-conversion-specialist
    - safety-sanitization-specialist
  security_review:
    - safety-sanitization-specialist
  binding_implementation:
    - rust-core-engineer
  testing:
    - test-automation-engineer
  documentation:
    - docs-writer
